<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>System Architecture &#8212; Tang Nano 4K Sobel Edge Detection 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="RTL Modules Documentation" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="system-architecture">
<h1>System Architecture<a class="headerlink" href="#system-architecture" title="Link to this heading">¶</a></h1>
<section id="overall-system-block-diagram">
<h2>Overall System Block Diagram<a class="headerlink" href="#overall-system-block-diagram" title="Link to this heading">¶</a></h2>
<p>The Tang Nano 4K Sobel edge detection system consists of the following major components:</p>
<p><strong>System Overview:</strong></p>
<div style="text-align: center; margin: 20px 0;">
<img src="https://via.placeholder.com/800x600/E3F2FD/1976D2?text=System+Architecture+Diagram"
     alt="System Architecture will be rendered from DOT file"
     style="max-width: 100%; border: 2px solid #1976D2; border-radius: 8px;">
</div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>To view the full system architecture diagram, render the DOT file:
<code class="docutils literal notranslate"><span class="pre">sphinx-docs/source/_static/diagrams/system_architecture.dot</span></code></p>
<p>Use online tool: <a class="reference external" href="https://dreampuf.github.io/GraphvizOnline/">https://dreampuf.github.io/GraphvizOnline/</a></p>
</div>
</section>
<section id="system-components">
<h2>System Components<a class="headerlink" href="#system-components" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p><strong>Input Interfaces</strong></p>
<ul class="simple">
<li><p>OV2640 Camera - RGB565 video input at 640×480&#64;30fps</p></li>
<li><p>Key Button - Mode control for switching between camera/testpattern</p></li>
</ul>
</li>
<li><p><strong>Clock Generation</strong></p>
<ul class="simple">
<li><p>Gowin PLLVR - Generates 74.25 MHz pixel clock and serial clocks from 27 MHz input</p></li>
<li><p>Provides 24 MHz camera clock (XCLK)</p></li>
</ul>
</li>
<li><p><strong>Video Processing Pipeline</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Camera → RGB→Gray → Line Buffer → Gaussian Blur → Sobel Kernel → Edge Magnitude
</pre></div>
</div>
<ul class="simple">
<li><p><strong>RGB to Gray Converter</strong>: Converts RGB565 to 8-bit grayscale</p></li>
<li><p><strong>Line Buffer</strong>: 3-line BRAM buffer (640×3 pixels) for sliding window</p></li>
<li><p><strong>Gaussian Blur</strong>: 3×3 filter for noise reduction</p></li>
<li><p><strong>Sobel Kernel</strong>: Computes horizontal (Gx) and vertical (Gy) gradients</p></li>
<li><p><strong>Edge Magnitude</strong>: Calculates √(Gx² + Gy²) approximation</p></li>
</ul>
</li>
<li><p><strong>Frame Buffer System</strong></p>
<ul class="simple">
<li><p>Frame Buffer Controller - Manages read/write operations</p></li>
<li><p>HyperRAM - 8MB external memory for double buffering</p></li>
<li><p>Stores processed frames (640×480×2 bytes per frame)</p></li>
</ul>
</li>
<li><p><strong>Output Interfaces</strong></p>
<ul class="simple">
<li><p><strong>DVI/HDMI Transmitter</strong>: TMDS serialization for <a class="reference external" href="mailto:720p&#37;&#52;&#48;60Hz">720p<span>&#64;</span>60Hz</a> output</p></li>
<li><p><strong>UART Interface</strong>: 115200 baud for debug and control commands</p></li>
<li><p><strong>LED Indicators</strong>: 6 status LEDs</p></li>
</ul>
</li>
</ol>
</section>
<section id="data-flow">
<h2>Data Flow<a class="headerlink" href="#data-flow" title="Link to this heading">¶</a></h2>
<p><strong>Main Video Path:</strong></p>
<ol class="arabic simple">
<li><p>OV2640 camera captures RGB565 frames at 30 fps</p></li>
<li><p>RGB565 → Grayscale conversion (8-bit per pixel)</p></li>
<li><p>Line buffer accumulates 3 rows for 3×3 window extraction</p></li>
<li><p>Gaussian blur reduces noise in 3×3 windows</p></li>
<li><p>Sobel kernel computes gradients (Gx, Gy)</p></li>
<li><p>Edge magnitude calculator produces final edge map</p></li>
<li><p>Frame buffer stores processed frame in HyperRAM</p></li>
<li><p>HDMI transmitter outputs to display at <a class="reference external" href="mailto:720p&#37;&#52;&#48;60Hz">720p<span>&#64;</span>60Hz</a></p></li>
</ol>
<p><strong>Control Path:</strong></p>
<ul class="simple">
<li><p>Button input controls mode selection (camera vs test pattern)</p></li>
<li><p>UART receives commands for Sobel enable/disable</p></li>
<li><p>UART transmits debug data and frame statistics</p></li>
<li><p>LED indicators show system status</p></li>
</ul>
</section>
<section id="resource-utilization">
<h2>Resource Utilization<a class="headerlink" href="#resource-utilization" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Resource</p></th>
<th class="head"><p>Used</p></th>
<th class="head"><p>Available</p></th>
<th class="head"><p>Percentage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Logic Elements (LUTs)</p></td>
<td><p>~2,500</p></td>
<td><p>4,608</p></td>
<td><p>54%</p></td>
</tr>
<tr class="row-odd"><td><p>Flip-Flops</p></td>
<td><p>~1,800</p></td>
<td><p>4,608</p></td>
<td><p>39%</p></td>
</tr>
<tr class="row-even"><td><p>Block RAM (BSRAM)</p></td>
<td><p>6</p></td>
<td><p>10</p></td>
<td><p>60%</p></td>
</tr>
<tr class="row-odd"><td><p>DSP Blocks</p></td>
<td><p>0</p></td>
<td><p>8</p></td>
<td><p>0%</p></td>
</tr>
<tr class="row-even"><td><p>PLLs</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>50%</p></td>
</tr>
</tbody>
</table>
</section>
<section id="timing-performance">
<h2>Timing Performance<a class="headerlink" href="#timing-performance" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Clock Domain</p></th>
<th class="head"><p>Frequency</p></th>
<th class="head"><p>Slack</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>System Clock</p></td>
<td><p>27 MHz</p></td>
<td><p>+10.2 ns</p></td>
</tr>
<tr class="row-odd"><td><p>Pixel Clock</p></td>
<td><p>74.25 MHz</p></td>
<td><p>+2.8 ns</p></td>
</tr>
<tr class="row-even"><td><p>Serial Clock (TMDS)</p></td>
<td><p>371.25 MHz</p></td>
<td><p>+0.5 ns</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pipeline-latency">
<h2>Pipeline Latency<a class="headerlink" href="#pipeline-latency" title="Link to this heading">¶</a></h2>
<p>Total latency from camera input to edge detection output:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stage</p></th>
<th class="head"><p>Cycles</p></th>
<th class="head"><p>Time (&#64; 27 MHz)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RGB to Gray</p></td>
<td><p>1</p></td>
<td><p>37 ns</p></td>
</tr>
<tr class="row-odd"><td><p>Line Buffer</p></td>
<td><p>2 lines + 2</p></td>
<td><p>~47.4 μs</p></td>
</tr>
<tr class="row-even"><td><p>Gaussian Blur</p></td>
<td><p>1</p></td>
<td><p>37 ns</p></td>
</tr>
<tr class="row-odd"><td><p>Sobel Kernel</p></td>
<td><p>1</p></td>
<td><p>37 ns</p></td>
</tr>
<tr class="row-even"><td><p>Edge Magnitude</p></td>
<td><p>2</p></td>
<td><p>74 ns</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Total</strong></p></td>
<td><p><strong>~1282</strong></p></td>
<td><p><strong>~47.5 μs</strong></p></td>
</tr>
</tbody>
</table>
</section>
<section id="memory-organization">
<h2>Memory Organization<a class="headerlink" href="#memory-organization" title="Link to this heading">¶</a></h2>
<p><strong>BRAM Usage:</strong></p>
<ul class="simple">
<li><p>Line Buffer 0: 640×8 bits = 5,120 bits</p></li>
<li><p>Line Buffer 1: 640×8 bits = 5,120 bits</p></li>
<li><p>Line Buffer 2: 640×8 bits = 5,120 bits</p></li>
<li><p>Total: 15,360 bits = ~1.88 KB (uses 6 BSRAM blocks)</p></li>
</ul>
<p><strong>HyperRAM Layout:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0x000000 - 0x096000  Frame Buffer 0 (614,400 bytes)
0x096000 - 0x12C000  Frame Buffer 1 (614,400 bytes)
0x12C000 - 0x1C2000  Reserved (614,400 bytes)
0x1C2000 - 0x800000  Unused (~6.2 MB)
</pre></div>
</div>
</section>
<section id="external-interfaces">
<h2>External Interfaces<a class="headerlink" href="#external-interfaces" title="Link to this heading">¶</a></h2>
<p><strong>Camera Interface (DVP):</strong></p>
<ul class="simple">
<li><p>PIXDATA[7:0] - Parallel pixel data</p></li>
<li><p>PIXCLK - Pixel clock input</p></li>
<li><p>HREF - Horizontal reference</p></li>
<li><p>VSYNC - Vertical sync</p></li>
<li><p>I2C (SCL/SDA) - Configuration interface</p></li>
</ul>
<p><strong>HDMI Interface:</strong></p>
<ul class="simple">
<li><p>tmds_clk_p/n - Differential clock pair</p></li>
<li><p>tmds_data_p/n[2:0] - 3 differential data pairs</p></li>
</ul>
<p><strong>UART Interface:</strong></p>
<ul class="simple">
<li><p>TX - Transmit data</p></li>
<li><p>RX - Receive data</p></li>
<li><p>Baud: 115200, 8N1</p></li>
</ul>
</section>
<section id="power-consumption">
<h2>Power Consumption<a class="headerlink" href="#power-consumption" title="Link to this heading">¶</a></h2>
<p>Estimated power consumption:</p>
<ul class="simple">
<li><p>Core logic: ~150 mW</p></li>
<li><p>I/O: ~50 mW</p></li>
<li><p>BRAM: ~20 mW</p></li>
<li><p>PLL: ~30 mW</p></li>
<li><p><strong>Total</strong>: ~250 mW &#64; 3.3V</p></li>
</ul>
</section>
<section id="design-constraints">
<h2>Design Constraints<a class="headerlink" href="#design-constraints" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Minimum camera frame rate: 15 fps</p></li>
<li><p>Maximum processing latency: 2 lines</p></li>
<li><p>HDMI output resolution: 720p (1280×720)</p></li>
<li><p>HDMI refresh rate: 60 Hz</p></li>
<li><p>Power budget: &lt; 500 mW</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Tang Nano 4K Sobel Edge Detection</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="modules.html">RTL Modules Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">System Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overall-system-block-diagram">Overall System Block Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-components">System Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-flow">Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resource-utilization">Resource Utilization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timing-performance">Timing Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline-latency">Pipeline Latency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory-organization">Memory Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-interfaces">External Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#power-consumption">Power Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="#design-constraints">Design Constraints</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">RTL Modules Documentation</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Nguyễn Văn Đạt.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/architecture.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>